<div class="first-div">
  <button class="back-btn" (click)="goBack()">
  <i class="pi pi-arrow-left"></i>
</button>
<h3>Welcome To The {{etfDetails[0]?.nickname || "ETF Details"}}</h3>
</div>

<div class="table-card">
  <div class="search-header p-d-flex p-ai-center p-jc-between">
    <h4>
      Summary Of Actions
      <button pButton type="button" label="IRR = {{ irrResult || 0 }}%" class="p-button-sm ml-2"
        style="height: 28px;"></button>
    </h4>
    <div class="search-container">
      <input pInputText type="text" (input)="onGlobalFilter($event, 'action')" placeholder="Search actions..." />
    </div>
  </div>

  <p-table #actionTableSummary [value]="actionTableList" dataKey="id" [paginator]="true" [rows]="10"
    [rowsPerPageOptions]="[5, 10, 25, 100, 500, 1000]"
    [globalFilterFields]="['net_total_before_levies','order_number','order_number','trade_number','redeem_amount']" scrollHeight="600px"
    responsiveLayout="scroll" [resizableColumns]="true" columnResizeMode="expand" class="custom-table">

    <!-- Header -->
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="order_number">Order No <p-sortIcon field="order_number"></p-sortIcon></th>
        <th pSortableColumn="trade_number">Trade No <p-sortIcon field="trade_number"></p-sortIcon></th>
        <th pSortableColumn="trade_date">Trade Date <p-sortIcon field="trade_date"></p-sortIcon></th>
        <th pSortableColumn="order_type">Order Type <p-sortIcon field="order_number"></p-sortIcon></th>
        <th pSortableColumn="security_description">security Description <p-sortIcon field="security_description"></p-sortIcon></th>
        <th pSortableColumn="quantity">Quantity <p-sortIcon field="quantity"></p-sortIcon></th>
        <th pSortableColumn="brokerage_per_unit">Brokerage <p-sortIcon field="brokerage_per_unit"></p-sortIcon></th>
        <th pSortableColumn="closing_rate">closing Rate Amount <p-sortIcon field="closing_rate"></p-sortIcon></th>
        <th pSortableColumn="net_total_before_levies">Net Total <p-sortIcon field="net_total_before_levies"></p-sortIcon></th>

      </tr>
    </ng-template>

    <!-- Body -->
    <ng-template pTemplate="body" let-etf>
      <tr>
        <td>{{ etf.order_number }}</td>
        <td>{{ etf.trade_number }}</td>
        <td>{{ etf.trade_date | date:'dd-MM-yyyy'}}</td>
        <td><p-tag [value]="etf.order_type" [severity]="getSeverity(etf.order_type)" /></td>
        <td>{{ etf.security_description }}</td>
        <td>{{ etf.quantity }}</td>
        <td>{{ etf.brokerage_per_unit }}</td>
        <td>{{ etf.closing_rate | number:'1.2-2' }}</td>
        <td>{{ etf.net_total_before_levies | number:'1.2-2' }}</td>
      </tr>
    </ng-template>

    <!-- Footer (Summary Row) -->
    <ng-template pTemplate="footer">
      <tr class="summary-row">
        <td colspan="3" class="summary green">
          Purchases → Units: {{ totalPurchaseUnits | number:'1.2-2' }} |
          Amount: {{ totalPurchaseAmount | currency:'INR' }}
        </td>
        <td colspan="3" class="summary blue">
          Available → Units: {{ availableUnits | number:'1.2-2' }} |
          Amount: {{ availableAmount | currency:'INR' }}
        </td>
        <td colspan="3" class="summary red text-right">
          Sales → Units: {{ totalSalesUnits | number:'1.2-2' }} |
          Amount: {{ totalSalesAmount | currency:'INR' }}
        </td>
      </tr>
    </ng-template>

    <ng-template #emptymessage>
      <tr><td colspan="9">No Records found</td> </tr>
    </ng-template>

  </p-table>
</div>
