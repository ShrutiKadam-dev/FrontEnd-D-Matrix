<p-button 
  label="Add Entity" 
  icon="pi pi-plus" 
  (onClick)="showModal()" 
  styleClass="add-entity-btn mb-3">
</p-button>

<p-dialog header="Add New Entity" [(visible)]="displayModal" [modal]="true" [closable]="true"
  [style]="{ width: '35vw', 'max-height': '90vh' }" [contentStyle]="{ 'overflow-y': 'auto' }">

  <form [formGroup]="entityForm" class="p-fluid">
    <div class="field">
      <label for="scripname">Scrip Name</label>
      <input id="scripname" pInputText formControlName="scripname" placeholder="Enter Scrip Name">
    </div>

    <div class="field">
      <label for="scripcode">Scrip Code</label>
      <input id="scripcode" pInputText formControlName="scripcode" placeholder="Enter Scrip Code">
    </div>

    <div class="field">
      <label for="nickname">Nick Name</label>
      <input id="nickname" pInputText formControlName="nickname" placeholder="Enter Nickname">
    </div>

    <div class="field">
      <label for="category">Category</label>
      <p-dropdown id="category" formControlName="category" [options]="categoryOptions" placeholder="Select Category"
        appendTo="body">
      </p-dropdown>
    </div>

    <div class="field">
      <label for="subcategory">Sub Category</label>
      <p-dropdown id="subcategory" formControlName="subcategory" [options]="subCategoryOptions"
        placeholder="Select Sub Category" appendTo="body" panelStyleClass="subcategory-panel" dropdownPosition="top">
      </p-dropdown>
    </div>

    <div class="field">
      <label for="benchmark">Benchmark</label>
      <input id="benchmark" pInputText formControlName="benchmark" placeholder="Enter Benchmark">
    </div>
    
    <div class="dialog-actions">
      <p-button label="Cancel" icon="pi pi-times" class="p-button-outlined p-button-secondary"
        (onClick)="displayModal = false" styleClass="add-entity-btn mb-3">
      </p-button>

      <p-button label="Add" icon="pi pi-check" class="p-button-success" (onClick)="addEntity()"
        [disabled]="entityForm.invalid" styleClass="add-entity-btn mb-3">
      </p-button>
    </div>
  </form>
</p-dialog>

<div class="mt-4">
  <h3>Entities</h3>
  <div *ngFor="let entity of entityList || []"
    class="p-3 mb-3 border-round surface-100 shadow-1 flex justify-content-between align-items-center">

    <div>
      <div><strong>Scrip Name:</strong> {{ entity.scripname }}</div>
      <div><strong>Category:</strong> {{ getCategoryLabel(entity.category) }}</div>
      <div><strong>Sub Category:</strong> {{ getSubCategoryLabel(entity.category, entity.subcategory) }}</div>
      <div><strong>Benchmark:</strong> {{ entity.benchmark }}</div>
    </div>

    <p-button label="Update" icon="pi pi-pencil" class="p-button-rounded p-button-info">
    </p-button>
  </div>
</div>
